(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{274:function(e,t,a){e.exports=a(632)},279:function(e,t,a){},578:function(e,t,a){},632:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(36),s=a.n(i),o=(a(279),a(117)),c=a(260),l=a(261),h=a(271),u=a(262),m=a(272),d=a(263),p=a.n(d),v=a(163),g=a.n(v),f=a(634),b=a(636),y=a(637),E=a(635),w=(a(578),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).data=[],a.timeline=[],a.reserve=0,a.retry=0,a.options={title:{text:"\u5b9e\u65f6\u6e29\u5ea6\u6298\u7ebf\u56fe"},tooltip:{trigger:"axis",formatter:function(e){return e[0].data},axisPointer:{animation:!1}},xAxis:{type:"category"},yAxis:{boundaryGap:[0,"50%"],type:"value"},series:{name:"\u6e29\u5ea6",type:"line",smooth:!0,data:[]}},a.echarts=null,a.heatButton=null,a.url="http://192.168.7.2:2333",a.getInterval=null,a.state={temperature:20,heatText:"\u52a0\u70ed 10s",heatable:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.renderEcharts(),this.getTemperature(),this.getInterval=setInterval(function(){return e.getTemperature()},1e3)}},{key:"render",value:function(){var e=this,t=this.state.temperature,a=t<=30?"#52c41a":t<=60?"#FF5500":"#f5222d";return r.a.createElement("div",{className:"app"},r.a.createElement("h1",{className:"title"},"Real-time Temperature Monitor",r.a.createElement("span",{className:"powered-by"},"(Powered by BeagleBone Black + TMP75)")),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"left"},r.a.createElement("h1",{className:"current-tag"},"\u5f53\u524d\u6e29\u5ea6\uff08\u6444\u6c0f\u5ea6\uff09\uff1a"),r.a.createElement("div",null,r.a.createElement(f.a,{strokeColor:a,type:"dashboard",percent:this.state.temperature,format:function(e){return e+"\xb0C"},width:250}))),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"table-container",id:"table-container"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(b.a,{type:"primary",loading:!this.state.heatable,disabled:!this.state.heatable,onClick:function(){return e.heatSensor()}},this.state.heatText),r.a.createElement("p",{className:"reserve"},r.a.createElement("span",{className:"reserve-tag"},"\u4fdd\u7559\u6240\u6709\u6e29\u5ea6\u6570\u636e"),r.a.createElement(y.a,{onChange:function(){return e.reserve=!e.reserve}}))))),r.a.createElement("div",{class:"copyright"},"\xa9kirainmoe @ Xiamen University School of Information Science & Engineering"))}},{key:"renderEcharts",value:function(){this.echarts||(this.echarts=p.a.init(document.getElementById("table-container"),"light")),this.options.series.data=this.data,this.options.xAxis.data=this.timeline,this.echarts.setOption(this.options)}},{key:"getTemperature",value:function(){var e=this;g.a.get(this.url+"/temperature",{timeout:1e3}).then(function(t){var a=JSON.parse(t),n=parseInt(a.temperature);e.setState({temperature:n});var r=new Date,i=r.getMinutes(),s=r.getSeconds(),o=r.getHours();if(i=i<10?"0"+i:i,s=s<10?"0"+s:s,0===e.data.length)for(var c=0;c<=15;c++)e.data.push(n),e.timeline.push("");else e.data.push(n),e.timeline.push(o+":"+i+":"+s);if(!e.reserve)for(;e.data.length>15;)e.data.shift(),e.timeline.shift();e.renderEcharts()}).catch(function(t){e.retry++,5===e.retry&&(E.a.error("\u65e0\u6cd5\u8fde\u63a5\u5230 BeagleBone \u670d\u52a1\u5668\u3002\u8bf7\u786e\u8ba4 BeagleBone \u540e\u7aef\u6b63\u5728\u8fd0\u884c\u540e\uff0c\u5237\u65b0\u672c\u9875\u9762\u3002"),clearInterval(e.getInterval))})}},{key:"heatSensor",value:function(){var e=this;g.a.get(this.url+"/heat",{timeout:1e3}).then(function(t){var a=10;(t=JSON.parse(t)).code=parseInt(t.code),e.setState(Object(o.a)({},e.state,{heatable:!1,heatText:200===t.code?"Waiting ".concat(a,"s"):"\u6e29\u5ea6\u5df2\u8fbe\u5230\u9608\u503c"}));var n=setInterval(function(){0===a?(clearInterval(n),e.setState(Object(o.a)({},e.state,{heatable:!0,heatText:"\u52a0\u70ed 10s"}))):200===t.code?e.setState(Object(o.a)({},e.state,{heatText:"Waiting ".concat(--a,"s")})):a-=2},1e3)}).catch(function(e){E.a.error("\u5df2\u65ad\u5f00\u4e0e BeagleBone Black \u540e\u7aef\u7684\u8fde\u63a5\uff0c\u53d1\u9001\u8bf7\u6c42\u5931\u8d25\u3002")})}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[274,2,1]]]);
//# sourceMappingURL=main.55341e91.chunk.js.map